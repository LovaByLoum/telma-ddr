(function($){function initialize_field($field){var input=$field.find('input.bea-acf-iconmoon');var allowClear=$(input).attr('data-allow-clear')||0;var opts={dropdownCssClass:"bigdrop widefat",dropdownAutoWidth:true,formatResult:bea_iconmoon_format,formatSelection:bea_iconmoon_format_small,data:{results:bea_acf_iconmon},allowClear:1==allowClear};input.select2(opts);function bea_iconmoon_format(css){return"<span style='font-size:3em' class='icon-"+css.id+"'></span> "+css.text;} function bea_iconmoon_format_small(css){return"<span class='icon-"+css.id+"'></span> "+css.text;}} if(typeof acf.add_action!=='undefined'){acf.add_action('ready append',function(jQueryel){acf.get_fields({type:'iconmoon'},jQueryel).each(function(){initialize_field($(this));});});}else{$(document).on('acf/setup_fields',function(e,postbox){$(postbox).find('.field[data-field_type="iconmoon"]').each(function(){console.log($(this));initialize_field($(this));});});$(document).on('acf/validate_field',function(e,field){var $field=$(field);var l=$field.find('.select2-chosen');if(l.length!=0){var el=$field.find('.select2-chosen').first();if(el.html()==='Select an icon') $field.data('validation',false);else $field.data('validation',true);}});}})(jQuery);